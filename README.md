# Shell Emulator (Python)

Данный проект представляет собой эмулятор командной оболочки, который имитирует работу консоли UNIX-подобной операционной системы. Программа была разработана в рамках работы по дисциплине «Конфигурационное управление».  
Основная идея проекта заключается в создании интерактивного интерфейса командной строки, в котором можно выполнять базовые команды, работать с виртуальной файловой системой и управлять элементами внутри неё, не затрагивая реальные файлы на компьютере.

Эмулятор полностью реализован на языке Python и работает в виде CLI-приложения. Все действия происходят в оперативной памяти. В качестве источника данных используется CSV-файл, который описывает структуру каталогов и файлов виртуальной файловой системы. При запуске программы эта структура загружается и становится доступной для навигации и манипуляций.

## Этапы разработки

Проект был выполнен поэтапно, в соответствии с заданием. Каждый этап добавлял новые возможности и улучшал функциональность эмулятора.

### Этап 1. Базовый REPL

На этом этапе была создана минимальная рабочая версия программы с простейшим циклом чтения команд. Реализовано приглашение к вводу в виде строки с именем пользователя и хоста, как в Linux. Были добавлены заглушки для команд:
- ls  
- cd  
- exit  

Программа уже могла принимать команды и реагировать на них.

### Этап 2. Конфигурация и стартовый скрипт

На этом этапе был добавлен парсер аргументов командной строки, который позволяет задавать путь к виртуальной файловой системе, шаблон приглашения и стартовый скрипт. Стартовый скрипт — это обычный текстовый файл с командами, которые выполняются автоматически при запуске эмулятора. После выполнения скрипта программа переходит в интерактивный режим.

### Этап 3. Виртуальная файловая система (VFS)

Здесь была реализована полноценная виртуальная файловая система. Она загружается из CSV-файла и хранится в оперативной памяти.  
Добавлены команды:
- ls  
- cd  
- tree  
- vfs-info  

Эти команды позволяют просматривать содержимое каталогов, переходить между ними, выводить структуру в виде дерева и получать информацию о загруженном CSV-файле. Вся работа выполняется в памяти, реальные файлы не затрагиваются.

### Этап 4. Основные команды

Добавлены дополнительные команды, приближенные к поведению UNIX:
- uname  
- whoami  

Они выводят информацию о системе и пользователе.

### Этап 5. Дополнительные команды

На последнем этапе были реализованы команды, которые изменяют состояние виртуальной файловой системы в памяти:
- chmod  
- rm  

Команда chmod позволяет изменять права доступа к файлам и каталогам. Поддерживаются как числовые значения (например, 755), так и строковые форматы (например, rwxr-xr-x).  
Команда rm удаляет файлы или каталоги, при этом поддерживается рекурсивное удаление при использовании флага -r. Все изменения происходят только в памяти и не затрагивают исходный CSV-файл.  
Также была добавлена проверка прав доступа, чтобы поведение было ближе к реальному терминалу.

## Структура проекта
```
Configuration-Management/
│
├── prac1.py - основной исполняемый файл эмулятора
├── vfs.py - реализация виртуальной файловой системы
├── vfs_nested.csv - структура виртуальной ФС в формате CSV
├── startup.txt - пример стартового скрипта
└── README.md - описание проекта
```

## Пример запуска

Программу можно запустить через консоль, выполнив команду:
python prac1.py


После запуска эмулятор автоматически загружает виртуальную файловую систему и выполняет команды из файла startup.txt.  
Далее можно вводить команды вручную.

Пример работы программы:

[INFO] VFS loaded successfully from vfs_nested.csv
[INFO] Executing startup script: startup.txt
```
danis@DESKTOP:/$ ls
assets docs
danis@DESKTOP:/$ cd /docs
danis@DESKTOP:/docs$ chmod 000 readme.txt
danis@DESKTOP:/docs$ rm readme.txt
rm: Permission denied
danis@DESKTOP:/docs$ chmod 700 readme.txt
danis@DESKTOP:/docs$ rm readme.txt
danis@DESKTOP:/docs$ exit
Exiting emulator.
```

## Заключение

В ходе работы был создан эмулятор командной оболочки с поддержкой базовых и дополнительных команд.  
Программа способна работать как в интерактивном режиме, так и выполнять команды из скриптов. Виртуальная файловая система реализована в объектно-ориентированном виде и функционирует полностью в памяти.  
Проект можно использовать для демонстрации принципов работы командной строки, организации файловой системы и проверки базовых знаний по Python и структуре UNIX-подобных систем.

